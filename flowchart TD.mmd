flowchart TD
    A[ðŸ“§ Incoming Email] --> B{Email Connector}
    B -->|IMAP| C[IMAP Processor]
    B -->|Exchange| D[Exchange Processor]
    B -->|Gmail API| E[Gmail Processor]
    
    C --> F[ðŸ“ Content Extraction]
    D --> F
    E --> F
    
    F --> G[ðŸŒ Language Detection]
    G --> H[ðŸ§  AI Analysis Engine]
    
    H --> I[ðŸŽ¯ Intent Classification]
    H --> J[ðŸ” Entity Extraction]
    H --> K[ðŸ˜Š Sentiment Analysis]
    H --> L[âš¡ Priority Scoring]
    
    I --> M{Intent Type}
    M -->|NEW_LEAD| N[ðŸ’° Sales Pipeline]
    M -->|SERVICE_REQUEST| O[ðŸ”§ Service Pipeline]
    M -->|EMERGENCY| P[ðŸš¨ Emergency Pipeline]
    M -->|QUOTE_REQUEST| Q[ðŸ“‹ Quote Pipeline]
    
    J --> R[ðŸ“Š Entity Database]
    K --> S[ðŸ“ˆ Sentiment Tracking]
    L --> T[âš ï¸ Priority Queue]
    
    N --> U[ðŸ¤– Response Generation]
    O --> U
    P --> U
    Q --> U
    
    U --> V{Approval Required?}
    V -->|Yes| W[ðŸ‘¨â€ðŸ’¼ Human Approval]
    V -->|No| X[ðŸ“¤ Auto Send]
    
    W --> Y{Approved?}
    Y -->|Yes| X
    Y -->|No| Z[âœï¸ Manual Edit]
    Z --> X
    
    X --> AA[ðŸ“Š Analytics Update]
    AA --> BB[ðŸ”„ Pipeline Update]
    BB --> CC[ðŸ“± Notifications]
    
    style A fill:#e3f2fd
    style H fill:#f3e5f5
    style U fill:#e8f5e8
    style X fill:#fff3e0
    style P fill:#ffebee