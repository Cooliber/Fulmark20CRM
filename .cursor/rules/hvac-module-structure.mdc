# HVAC Module Complete Structure Documentation

## ğŸ—ï¸ **HVAC Frontend Architecture** (`/packages/twenty-front/src/modules/hvac/`)

### **Core Components Structure**
```
hvac/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ HvacDashboard.tsx              # Main dashboard container
â”‚   â”‚   â”œâ”€â”€ HvacDashboardTabs.tsx          # Tab navigation component
â”‚   â”‚   â”œâ”€â”€ HvacOverviewTab.tsx            # Overview statistics tab
â”‚   â”‚   â”œâ”€â”€ HvacSearchTab.tsx              # Semantic search tab
â”‚   â”‚   â”œâ”€â”€ HvacTicketsTab.tsx             # Service tickets tab
â”‚   â”‚   â”œâ”€â”€ HvacEquipmentTab.tsx           # Equipment management tab
â”‚   â”‚   â””â”€â”€ index.ts                       # Dashboard exports
â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”œâ”€â”€ HvacNavigationSection.tsx      # Main HVAC navigation
â”‚   â”‚   â”œâ”€â”€ HvacObjectsNavigationSection.tsx # HVAC objects in nav
â”‚   â”‚   â””â”€â”€ index.ts                       # Navigation exports
â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â”œâ”€â”€ HvacSemanticSearch.tsx         # AI-powered search
â”‚   â”‚   â”œâ”€â”€ HvacSearchResults.tsx          # Search results display
â”‚   â”‚   â”œâ”€â”€ HvacSearchFilters.tsx          # Search filtering
â”‚   â”‚   â””â”€â”€ index.ts                       # Search exports
â”‚   â”œâ”€â”€ service-planner/
â”‚   â”‚   â”œâ”€â”€ HvacServicePlanner.tsx         # Service planning tool
â”‚   â”‚   â”œâ”€â”€ HvacScheduleView.tsx           # Calendar/schedule view
â”‚   â”‚   â”œâ”€â”€ HvacTechnicianAssignment.tsx   # Technician assignment
â”‚   â”‚   â””â”€â”€ index.ts                       # Planner exports
â”‚   â”œâ”€â”€ dispatch/
â”‚   â”‚   â”œâ”€â”€ HvacDispatchPanel.tsx          # Dispatch management
â”‚   â”‚   â”œâ”€â”€ HvacWorkOrderQueue.tsx         # Work order queue
â”‚   â”‚   â”œâ”€â”€ HvacTechnicianStatus.tsx       # Technician status
â”‚   â”‚   â””â”€â”€ index.ts                       # Dispatch exports
â”‚   â”œâ”€â”€ mobile/
â”‚   â”‚   â”œâ”€â”€ HvacMobileMaintenance.tsx      # Mobile maintenance
â”‚   â”‚   â”œâ”€â”€ HvacFieldReports.tsx           # Field reporting
â”‚   â”‚   â”œâ”€â”€ HvacOfflineSync.tsx            # Offline synchronization
â”‚   â”‚   â””â”€â”€ index.ts                       # Mobile exports
â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”œâ”€â”€ HvacAnalyticsDashboard.tsx     # Analytics overview
â”‚   â”‚   â”œâ”€â”€ HvacPerformanceMetrics.tsx     # Performance tracking
â”‚   â”‚   â”œâ”€â”€ HvacReports.tsx                # Report generation
â”‚   â”‚   â””â”€â”€ index.ts                       # Analytics exports
â”‚   â””â”€â”€ shared/
â”‚       â”œâ”€â”€ HvacErrorBoundary.tsx          # Error handling
â”‚       â”œâ”€â”€ HvacLoadingSpinner.tsx         # Loading states
â”‚       â”œâ”€â”€ HvacNotifications.tsx          # Notification system
â”‚       â””â”€â”€ index.ts                       # Shared exports
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useHvacSemanticSearch.ts           # Semantic search hook
â”‚   â”œâ”€â”€ useHvacServiceTickets.ts           # Service tickets hook
â”‚   â”œâ”€â”€ useHvacEquipment.ts                # Equipment management hook
â”‚   â”œâ”€â”€ useHvacTechnicians.ts              # Technician management hook
â”‚   â”œâ”€â”€ useHvacAnalytics.ts                # Analytics data hook
â”‚   â”œâ”€â”€ useHvacNotifications.ts            # Notifications hook
â”‚   â””â”€â”€ index.ts                           # Hooks exports
â”œâ”€â”€ states/
â”‚   â”œâ”€â”€ hvacDashboardState.ts              # Dashboard state
â”‚   â”œâ”€â”€ hvacSearchState.ts                 # Search state
â”‚   â”œâ”€â”€ hvacServicePlannerState.ts         # Service planner state
â”‚   â”œâ”€â”€ hvacDispatchState.ts               # Dispatch state
â”‚   â”œâ”€â”€ hvacMobileState.ts                 # Mobile state
â”‚   â”œâ”€â”€ hvacAnalyticsState.ts              # Analytics state
â”‚   â””â”€â”€ index.ts                           # States exports
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ hvac-dashboard.types.ts            # Dashboard types
â”‚   â”œâ”€â”€ hvac-search.types.ts               # Search types
â”‚   â”œâ”€â”€ hvac-service.types.ts              # Service types
â”‚   â”œâ”€â”€ hvac-equipment.types.ts            # Equipment types
â”‚   â”œâ”€â”€ hvac-technician.types.ts           # Technician types
â”‚   â”œâ”€â”€ hvac-analytics.types.ts            # Analytics types
â”‚   â””â”€â”€ index.ts                           # Types exports
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ hvacFormatters.ts                  # Data formatters
â”‚   â”œâ”€â”€ hvacValidators.ts                  # Input validation
â”‚   â”œâ”€â”€ hvacCalculations.ts                # Business calculations
â”‚   â”œâ”€â”€ hvacConstants.ts                   # Constants and enums
â”‚   â””â”€â”€ index.ts                           # Utils exports
â””â”€â”€ index.ts                               # Main module exports
```

### **HVAC Pages Structure** (`/packages/twenty-front/src/pages/hvac/`)
```
hvac/
â”œâ”€â”€ HvacServicePlannerPage.tsx             # Service planner page
â”œâ”€â”€ HvacDashboardPage.tsx                  # Dashboard page
â”œâ”€â”€ HvacAnalyticsPage.tsx                  # Analytics page
â”œâ”€â”€ HvacDispatchPage.tsx                   # Dispatch page
â”œâ”€â”€ HvacMobilePage.tsx                     # Mobile page
â””â”€â”€ index.ts                               # Pages exports
```

## ğŸ”§ **HVAC Backend Architecture** (`/packages/twenty-server/src/modules/hvac/`)

### **Core Backend Structure**
```
hvac/
â”œâ”€â”€ resolvers/
â”‚   â”œâ”€â”€ hvac-semantic-search.resolver.ts   # Semantic search GraphQL
â”‚   â”œâ”€â”€ hvac-service-tickets.resolver.ts   # Service tickets GraphQL
â”‚   â”œâ”€â”€ hvac-equipment.resolver.ts         # Equipment GraphQL
â”‚   â”œâ”€â”€ hvac-technicians.resolver.ts       # Technicians GraphQL
â”‚   â”œâ”€â”€ hvac-analytics.resolver.ts         # Analytics GraphQL
â”‚   â””â”€â”€ index.ts                           # Resolvers exports
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ hvac-api-integration.service.ts    # External API integration
â”‚   â”œâ”€â”€ hvac-weaviate.service.ts           # Vector database service
â”‚   â”œâ”€â”€ hvac-data-sync.service.ts          # Data synchronization
â”‚   â”œâ”€â”€ hvac-cache.service.ts              # Caching service
â”‚   â”œâ”€â”€ hvac-notification.service.ts       # Notification service
â”‚   â”œâ”€â”€ hvac-analytics.service.ts          # Analytics service
â”‚   â”œâ”€â”€ hvac-scheduling.service.ts         # Scheduling service
â”‚   â””â”€â”€ index.ts                           # Services exports
â”œâ”€â”€ standard-objects/
â”‚   â”œâ”€â”€ hvac-equipment.workspace-entity.ts # Equipment entity
â”‚   â”œâ”€â”€ hvac-service-ticket.workspace-entity.ts # Service ticket entity
â”‚   â”œâ”€â”€ hvac-technician.workspace-entity.ts # Technician entity
â”‚   â”œâ”€â”€ hvac-maintenance-record.workspace-entity.ts # Maintenance entity
â”‚   â””â”€â”€ index.ts                           # Entities exports
â”œâ”€â”€ guards/
â”‚   â”œâ”€â”€ hvac-permissions.guard.ts          # HVAC permissions
â”‚   â”œâ”€â”€ hvac-feature-flags.guard.ts        # Feature flags
â”‚   â””â”€â”€ index.ts                           # Guards exports
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ hvac-search.dto.ts                 # Search DTOs
â”‚   â”œâ”€â”€ hvac-service.dto.ts                # Service DTOs
â”‚   â”œâ”€â”€ hvac-equipment.dto.ts              # Equipment DTOs
â”‚   â”œâ”€â”€ hvac-analytics.dto.ts              # Analytics DTOs
â”‚   â””â”€â”€ index.ts                           # DTOs exports
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ hvac-api.types.ts                  # API types
â”‚   â”œâ”€â”€ hvac-weaviate.types.ts             # Weaviate types
â”‚   â”œâ”€â”€ hvac-service.types.ts              # Service types
â”‚   â””â”€â”€ index.ts                           # Types exports
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ hvac-validators.ts                 # Input validators
â”‚   â”œâ”€â”€ hvac-transformers.ts               # Data transformers
â”‚   â”œâ”€â”€ hvac-constants.ts                  # Constants
â”‚   â””â”€â”€ index.ts                           # Utils exports
â”œâ”€â”€ hvac.module.ts                         # Main HVAC module
â””â”€â”€ index.ts                               # Module exports
```

## ğŸ§ª **HVAC Testing Structure** (`/packages/twenty-e2e-testing/tests/hvac/`)

### **E2E Tests Structure**
```
hvac/
â”œâ”€â”€ hvac-dashboard.spec.ts                 # Dashboard E2E tests
â”œâ”€â”€ hvac-semantic-search.spec.ts           # Search E2E tests
â”œâ”€â”€ hvac-service-planner.spec.ts           # Service planner E2E tests
â”œâ”€â”€ hvac-dispatch-panel.spec.ts            # Dispatch E2E tests
â”œâ”€â”€ hvac-mobile-maintenance.spec.ts        # Mobile E2E tests
â”œâ”€â”€ hvac-error-handling.spec.ts            # Error handling E2E tests
â”œâ”€â”€ hvac-performance.spec.ts               # Performance E2E tests
â””â”€â”€ fixtures/
    â”œâ”€â”€ hvac-test-data.ts                  # Test data fixtures
    â”œâ”€â”€ hvac-mock-responses.ts             # Mock API responses
    â””â”€â”€ hvac-test-helpers.ts               # Test helper functions
```

### **Page Object Models** (`/packages/twenty-e2e-testing/lib/pom/hvac/`)
```
hvac/
â”œâ”€â”€ HvacDashboardPage.ts                   # Dashboard POM
â”œâ”€â”€ HvacSemanticSearchPage.ts              # Search POM
â”œâ”€â”€ HvacServicePlannerPage.ts              # Service planner POM
â”œâ”€â”€ HvacDispatchPanelPage.ts               # Dispatch POM
â”œâ”€â”€ HvacMobileMaintenancePage.ts           # Mobile POM
â””â”€â”€ index.ts                               # POM exports
```

## ğŸ”— **HVAC Integration Points**

### **Navigation Integration**
- `MainNavigationDrawerScrollableItems.tsx` - Includes HvacNavigationSection
- `HvacNavigationSection.tsx` - Main HVAC navigation
- `HvacObjectsNavigationSection.tsx` - HVAC objects in navigation

### **Routing Integration**
- `/hvac/service-planner` - Service planner route
- `/hvac/dashboard` - Dashboard route
- `/hvac/analytics` - Analytics route
- `/hvac/dispatch` - Dispatch route
- `/hvac/mobile` - Mobile route

### **State Management Integration**
- Recoil atoms for HVAC state
- Integration with Twenty's global state
- Persistent state for user preferences

### **GraphQL Integration**
- HVAC resolvers in main GraphQL schema
- Type definitions for HVAC objects
- Mutations and queries for HVAC operations

### **Permission System Integration**
- HvacPermissionsGuard for access control
- Role-based permissions (technician, supervisor, manager, admin)
- Feature flag integration

## ğŸ¯ **HVAC Business Logic**

### **Core Features**
1. **Semantic Search** - AI-powered search across HVAC data
2. **Service Planning** - Intelligent scheduling and routing
3. **Dispatch Management** - Real-time technician coordination
4. **Mobile Maintenance** - Field service mobile app
5. **Analytics Dashboard** - Performance insights and reporting
6. **Equipment Tracking** - Asset management and maintenance

### **Polish Market Integration**
- Polish language support (labels, messages)
- Integration with Polish HVAC manufacturers (Vaillant, Viessmann, Bosch)
- Polish energy provider integration (PGE, Tauron, Enea)
- Local compliance and regulations

### **Philosophy: "Pasja rodzi profesjonalizm"**
- Professional-grade tools for HVAC technicians
- Intuitive UX designed for field workers
- Reliable offline capabilities
- Comprehensive error handling and recovery

## ğŸ“‹ **Implementation Status**

### âœ… **Completed (85%)**
- Backend services and resolvers
- GraphQL schema integration
- Workspace entities and metadata
- Frontend components and navigation
- State management setup
- Basic permission system

### âš ï¸ **In Progress (15%)**
- E2E test coverage completion
- Object navigation integration
- Production configuration
- Health check integration
- Advanced permission roles
- Performance optimization

### ğŸ¯ **Next Steps**
1. Complete object navigation integration
2. Finalize E2E test suite
3. Production deployment configuration
4. Performance monitoring setup
5. Advanced analytics implementation
